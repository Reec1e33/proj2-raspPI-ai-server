{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[metrics,setMetrics]=useState({});const[inference,setInference]=useState(null);useEffect(()=>{// Fetch metrics every few seconds\nconst fetchMetrics=async()=>{try{const res=await axios.get('/metrics');// Adjust baseURL or proxy if needed\nsetMetrics(res.data);}catch(err){console.error(err);}};fetchMetrics();const interval=setInterval(fetchMetrics,5000);return()=>clearInterval(interval);},[]);const handleCheckAnomaly=async()=>{try{// We'll pass sensor_temp as query param\nif(metrics.sensor_temp!==undefined){const res=await axios.get(\"/inference?value=\".concat(metrics.sensor_temp));setInference(res.data);}}catch(err){console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'1rem'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"AI Home Server Dashboard\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Metrics\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"CPU Temp: \",metrics.cpu_temp,\" \\xB0C\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Disk Usage: \",metrics.disk_usage,\" %\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Sensor Temp: \",metrics.sensor_temp,\" \\xB0C\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckAnomaly,children:\"Check Anomaly\"}),inference&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Anomaly Check\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Value Tested: \",inference.value_tested]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Anomaly Score: \",inference.anomaly_score]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Is Anomaly: \",inference.is_anomaly?'Yes':'No']})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","App","metrics","setMetrics","inference","setInference","fetchMetrics","res","get","data","err","console","error","interval","setInterval","clearInterval","handleCheckAnomaly","sensor_temp","undefined","concat","style","padding","children","cpu_temp","disk_usage","onClick","value_tested","anomaly_score","is_anomaly"],"sources":["/home/reec1e33/proj2-raspPI-ai-server/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nfunction App() {\n  const [metrics, setMetrics] = useState({});\n  const [inference, setInference] = useState(null);\n\n  useEffect(() => {\n    // Fetch metrics every few seconds\n    const fetchMetrics = async () => {\n      try {\n        const res = await axios.get('/metrics'); // Adjust baseURL or proxy if needed\n        setMetrics(res.data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchMetrics();\n    const interval = setInterval(fetchMetrics, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleCheckAnomaly = async () => {\n    try {\n      // We'll pass sensor_temp as query param\n      if (metrics.sensor_temp !== undefined) {\n        const res = await axios.get(`/inference?value=${metrics.sensor_temp}`);\n        setInference(res.data);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <div style={{padding: '1rem'}}>\n      <h1>AI Home Server Dashboard</h1>\n      <h2>Metrics</h2>\n      <ul>\n        <li>CPU Temp: {metrics.cpu_temp} °C</li>\n        <li>Disk Usage: {metrics.disk_usage} %</li>\n        <li>Sensor Temp: {metrics.sensor_temp} °C</li>\n      </ul>\n      <button onClick={handleCheckAnomaly}>Check Anomaly</button>\n      {inference && (\n        <div>\n          <h2>Anomaly Check</h2>\n          <p>Value Tested: {inference.value_tested}</p>\n          <p>Anomaly Score: {inference.anomaly_score}</p>\n          <p>Is Anomaly: {inference.is_anomaly ? 'Yes' : 'No'}</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC1C,KAAM,CAACU,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAW,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAX,KAAK,CAACY,GAAG,CAAC,UAAU,CAAC,CAAE;AACzCL,UAAU,CAACI,GAAG,CAACE,IAAI,CAAC,CACtB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CACpB,CACF,CAAC,CACDJ,YAAY,CAAC,CAAC,CACd,KAAM,CAAAO,QAAQ,CAAGC,WAAW,CAACR,YAAY,CAAE,IAAI,CAAC,CAChD,MAAO,IAAMS,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACF;AACA,GAAId,OAAO,CAACe,WAAW,GAAKC,SAAS,CAAE,CACrC,KAAM,CAAAX,GAAG,CAAG,KAAM,CAAAX,KAAK,CAACY,GAAG,qBAAAW,MAAA,CAAqBjB,OAAO,CAACe,WAAW,CAAE,CAAC,CACtEZ,YAAY,CAACE,GAAG,CAACE,IAAI,CAAC,CACxB,CACF,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CACpB,CACF,CAAC,CAED,mBACEV,KAAA,QAAKoB,KAAK,CAAE,CAACC,OAAO,CAAE,MAAM,CAAE,CAAAC,QAAA,eAC5BxB,IAAA,OAAAwB,QAAA,CAAI,0BAAwB,CAAI,CAAC,cACjCxB,IAAA,OAAAwB,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBtB,KAAA,OAAAsB,QAAA,eACEtB,KAAA,OAAAsB,QAAA,EAAI,YAAU,CAACpB,OAAO,CAACqB,QAAQ,CAAC,QAAG,EAAI,CAAC,cACxCvB,KAAA,OAAAsB,QAAA,EAAI,cAAY,CAACpB,OAAO,CAACsB,UAAU,CAAC,IAAE,EAAI,CAAC,cAC3CxB,KAAA,OAAAsB,QAAA,EAAI,eAAa,CAACpB,OAAO,CAACe,WAAW,CAAC,QAAG,EAAI,CAAC,EAC5C,CAAC,cACLnB,IAAA,WAAQ2B,OAAO,CAAET,kBAAmB,CAAAM,QAAA,CAAC,eAAa,CAAQ,CAAC,CAC1DlB,SAAS,eACRJ,KAAA,QAAAsB,QAAA,eACExB,IAAA,OAAAwB,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBtB,KAAA,MAAAsB,QAAA,EAAG,gBAAc,CAAClB,SAAS,CAACsB,YAAY,EAAI,CAAC,cAC7C1B,KAAA,MAAAsB,QAAA,EAAG,iBAAe,CAAClB,SAAS,CAACuB,aAAa,EAAI,CAAC,cAC/C3B,KAAA,MAAAsB,QAAA,EAAG,cAAY,CAAClB,SAAS,CAACwB,UAAU,CAAG,KAAK,CAAG,IAAI,EAAI,CAAC,EACrD,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAA3B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}